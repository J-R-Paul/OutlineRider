<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bike Editor Pro</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <!-- Add iOS specific meta tags for better PWA experience -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="BikeEditor">
    <!-- Link to an Apple touch icon (optional but recommended) -->
    <!-- <link rel="apple-touch-icon" href="icon-apple.png"> -->

</head>
<body>
    <header>
        <div class="header-main">
             <h1>Bike Editor Pro</h1>
             <span id="currentFileName" title="Current document status">Loading...</span>
        </div>

        <div class="file-actions">
            <!-- Direct Edit (Chrome/Edge) -->
            <div class="action-group" id="directFileAccess" style="display: none;">
                <button id="openDirectButton" title="Open file from device for direct editing (Chrome/Edge)">Open Direct</button>
                <button id="saveDirectButton" disabled title="Save changes directly to the opened file (Chrome/Edge)">Save Direct</button>
            </div>

            <!-- General Load/Save/New -->
            <div class="action-group">
                <label for="fileInput" class="file-input-label" title="Load file content (overwrites current session)">
                    Load Copy
                    <input type="file" id="fileInput"
                           accept=".bike,.html,application/xhtml+xml,text/xml,application/xml"
                           aria-label="Load Bike File (Overwrites current session)">
                </label>
                <button id="newButton" title="Start a new, empty outline (overwrites current session)">New</button>
                 <button id="saveAsButton" title="Download the current content as a .bike file">Save As...</button>
                 <button id="clearLocalButton" title="Clear temporary browser draft">Clear Draft</button>
            </div>
        </div>
    </header>

    <div id="toolbar">
        <!-- Toolbar buttons unchanged -->
        <button class="format-button" data-command="bold" title="Bold (Ctrl+B)"><b>B</b></button>
        <button class="format-button" data-command="italic" title="Italic (Ctrl+I)"><i>I</i></button>
        <button class="format-button" data-command="code" title="Code">{}</button>
        <button class="format-button" data-command="highlight" title="Highlight">H</button>
        <button id="linkButton" title="Create Link (Ctrl+K)">Link</button>
        <hr>
        <button class="type-button" data-type="heading" title="Heading">H</button>
        <button class="type-button" data-type="note" title="Note">N</button>
        <button class="type-button" data-type="task" title="Task">T</button>
        <button class="type-button" data-type="ordered" title="Ordered List Item">1.</button>
        <button class="type-button" data-type="unordered" title="Unordered List Item">•</button>
        <button class="type-button" data-type="hr" title="Horizontal Rule">—</button>
        <button class="type-button" data-type="" title="Plain Text">P</button>
        <hr>
        <button id="indentButton" title="Indent (Tab)">→</button>
        <button id="outdentButton" title="Outdent (Shift+Tab)">←</button>
        <button id="moveUpButton" title="Move Up (Alt+Shift+Up)">↑</button>
        <button id="moveDownButton" title="Move Down (Alt+Shift+Down)">↓</button>
        <button id="deleteButton" title="Delete Item (Del/Backspace on empty)">✕</button>
    </div>

    <main id="outlineContainer" tabindex="0">
        <div id="initialMessage">
            <p>Loading Editor...</p>
        </div>
    </main>

    <script src="worker.js" defer></script>
    <script src="script.js"></script>
</body>
</html>